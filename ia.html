<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IA - Recicla Tech</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
<style>
:root {
  --dark-blue: #0a0f1e;
  --light-neutral: #f4f6f8;
  --neon-cyan: #00ffff;
}

/* BODY */
body {
  margin: 0;
  font-family: 'Orbitron', sans-serif;
  background-color: var(--dark-blue);
  color: var(--light-neutral);
  overflow-x: hidden;
}

/* HEADER */
header { 
  position:fixed; top:0; left:0; width:100%; padding:20px; 
  display:flex; align-items:center; z-index:1000; 
}

/* HAMBURGER */
.hamburger-toggle {
  position:relative; z-index:1001; background:none; border:none; cursor:pointer;
  display:flex; flex-direction:column; justify-content:space-around;
  width:40px; height:32px;
}
.hamburger-toggle .bar {
  display:block; width:100%; height:4px; background:var(--light-neutral);
  border-radius:3px; transition: all 0.3s ease-in-out;
}
.hamburger-toggle.open .bar:nth-child(1) { transform: rotate(45deg) translate(6px,7px); }
.hamburger-toggle.open .bar:nth-child(2) { opacity:0; }
.hamburger-toggle.open .bar:nth-child(3) { transform: rotate(-45deg) translate(6px,-7px); }

/* NAV MENU */
.nav-menu {
  position:fixed; top:0; left:0; width:280px; height:100vh;
  background: var(--dark-blue); padding-top:100px; padding-left:30px;
  transform:translateX(-100%); transition: transform 0.4s cubic-bezier(0.23,1,0.32,1);
  z-index:999;
}
.nav-menu.open { transform:translateX(0); }
.nav-menu ul { list-style:none; }
.nav-menu ul li { margin-bottom:25px; }
.nav-menu ul li a {
  color:var(--light-neutral); text-decoration:none; font-size:1.5rem;
  font-weight:bold; transition:color 0.2s ease;
}
.nav-menu ul li a:hover, .nav-menu ul li a.active { color:var(--neon-cyan); }

/* HERO */
section.hero {
  padding: 120px 20px 40px;
  text-align: center;
}
section.hero h1 {
  font-size: 3rem;
  color: var(--neon-cyan);
  margin-bottom: 20px;
}
section.hero p {
  font-size: 1.2rem;
  line-height: 1.6;
  max-width: 800px;
  margin: 0 auto;
}

/* CANVAS */
canvas#particles, canvas#three-canvas {
  position: fixed; top:0; left:0; width:100%; height:100%;
  pointer-events: none; z-index:0;
}

/* MICROFONE FIXO */
#micButton {
  position: fixed;
  bottom: 90px;   /* acima da borda */
  left: 20px;     /* lado oposto ao chatfuel */
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: none;
  background: var(--neon-cyan);
  color: var(--dark-blue);
  font-size: 1.5rem;
  cursor: pointer;
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 15px var(--neon-cyan);
}
#micButton.listening {
  background: red;
  color: white;
}
</style>
</head>
<body>
<canvas id="particles"></canvas>
<canvas id="three-canvas"></canvas>

<!-- ===== Header ===== -->
<header>
  <button class="hamburger-toggle" aria-label="Abrir menu">
    <span class="bar"></span>
    <span class="bar"></span>
    <span class="bar"></span>
  </button>
</header>

<!-- ===== Menu ===== -->
<nav class="nav-menu">
  <ul>
    <li><a href="index.html">In√≠cio</a></li>
    <li><a href="projetos.html">Projetos</a></li>
    <li><a href="lixo.html">Lixo Eletr√¥nico</a></li>
    <li><a href="ia.html" class="active">IA</a></li>
    <li><a href="creditos.html">Cr√©ditos</a></li>
  </ul>
</nav>

<!-- ===== Hero ===== -->
<section class="hero fade-in">
  <h1>Intelig√™ncia Artificial</h1>
  <p>
    A Intelig√™ncia Artificial √© uma ferramenta poderosa no combate ao descarte incorreto de lixo eletr√¥nico.  
    Com ela, √© poss√≠vel identificar, classificar e sugerir formas de reciclagem de componentes eletr√¥nicos,  
    tornando o processo mais r√°pido e eficiente.  
  </p>
  <p>
    <strong>Dica:</strong> Aguarde alguns segundos at√© o √≠cone do chat aparecer no canto inferior direito da tela.  
    Quando ele surgir, clique e comece a conversar com a nossa IA! ü§ñ
  </p>
</section>

<!-- Bot√£o do microfone -->
<button id="micButton" title="Falar com a IA üé§">üé§</button>

<!-- ===== Scripts ===== -->
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
<script>
// --- HAMBURGER ---
const hamburgerToggle = document.querySelector('.hamburger-toggle');
const navMenu = document.querySelector('.nav-menu');
hamburgerToggle.addEventListener('click', () => {
  hamburgerToggle.classList.toggle('open');
  navMenu.classList.toggle('open');
});

// --- PARTICULAS ---
const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d');
let particles = [];
function resize() { canvas.width=window.innerWidth; canvas.height=window.innerHeight; }
window.addEventListener('resize', resize); resize();
function createParticles() {
  for(let i=0;i<100;i++){
    particles.push({ x:Math.random()*canvas.width, y:Math.random()*canvas.height, r:Math.random()*2+1, dx:(Math.random()-0.5)*0.5, dy:(Math.random()-0.5)*0.5 });
  }
}
createParticles();
function animateParticles(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle='rgba(0,255,255,0.7)';
    ctx.fill();
    p.x+=p.dx; p.y+=p.dy;
    if(p.x<0||p.x>canvas.width)p.dx*=-1;
    if(p.y<0||p.y>canvas.height)p.dy*=-1;
  });
  requestAnimationFrame(animateParticles);
}
animateParticles();

// --- THREE.JS 3D ---
const threeCanvas=document.getElementById('three-canvas');
const scene3D=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight,0.1,1000);
const renderer=new THREE.WebGLRenderer({canvas:threeCanvas, alpha:true});
renderer.setSize(window.innerWidth,window.innerHeight);

const geometry=new THREE.BoxGeometry();
const material=new THREE.MeshBasicMaterial({color:0x00ffff, wireframe:true});
const cubes=[];
for(let i=0;i<50;i++){
  const cube=new THREE.Mesh(geometry, material);
  cube.position.set((Math.random()-0.5)*50,(Math.random()-0.5)*50,(Math.random()-0.5)*50);
  scene3D.add(cube);
  cubes.push(cube);
}
camera.position.z=30;

const lines=[];
for(let i=0;i<50;i++){
  const a=cubes[i];
  const b=cubes[(i+Math.floor(Math.random()*cubes.length))%cubes.length];
  const points=[new THREE.Vector3(a.position.x,a.position.y,a.position.z),new THREE.Vector3(b.position.x,b.position.y,b.position.z)];
  const geometryLine=new THREE.BufferGeometry().setFromPoints(points);
  const lineMaterial=new THREE.LineBasicMaterial({color:0x00ffff, transparent:true, opacity:0.6});
  const line=new THREE.Line(geometryLine,lineMaterial);
  scene3D.add(line);
  lines.push({line,a,b,t:Math.random()});
}

function animate3D(){
  requestAnimationFrame(animate3D);
  cubes.forEach(c=>{ c.rotation.x+=0.002; c.rotation.y+=0.003; });
  lines.forEach(obj=>{
    obj.t+=0.01;
    const posA=obj.a.position;
    const posB=obj.b.position;
    const lerpX=posA.x+(posB.x-posA.x)*(0.5+0.5*Math.sin(obj.t));
    const lerpY=posA.y+(posB.y-posA.y)*(0.5+0.5*Math.sin(obj.t));
    const lerpZ=posA.z+(posB.z-posA.z)*(0.5+0.5*Math.sin(obj.t));
    obj.line.geometry.setFromPoints([new THREE.Vector3(posA.x,posA.y,posA.z), new THREE.Vector3(lerpX,lerpY,lerpZ)]);
    obj.line.material.opacity=0.3+0.4*Math.sin(obj.t*2);
  });
  camera.position.x=Math.sin(Date.now()*0.0005)*10;
  camera.position.y=Math.cos(Date.now()*0.0005)*5;
  camera.lookAt(0,0,0);
  renderer.render(scene3D,camera);
}
animate3D();

window.addEventListener('resize',()=>{
  camera.aspect=window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>

<!-- ===== Chatfuel Widget ===== -->
<script>
(function() {
  var script = document.createElement('script');
  script.dataset.bot = "68ca0c144662ac97ea0be150";
  script.dataset.zindex = "99999";
  script.src = "https://panel.chatfuel.com/widgets/chat-widget/chat-widget.js";
  script.async = true;
  script.defer = true;
  document.getElementsByTagName('head')[0].appendChild(script);
})()
</script>

<!-- ===== Web Speech API ===== -->
<script>
// Falar texto
function falar(texto) {
  const utter = new SpeechSynthesisUtterance(texto);
  utter.lang = "pt-BR";
  speechSynthesis.speak(utter);
}

// Reconhecer fala
function escutar(micButton) {
  if (!('webkitSpeechRecognition' in window)) {
    alert("Seu navegador n√£o suporta reconhecimento de voz.");
    return;
  }
  const recognition = new webkitSpeechRecognition();
  recognition.lang = "pt-BR";
  recognition.continuous = false;
  recognition.interimResults = false;

  recognition.onstart = () => micButton.classList.add("listening");
  recognition.onend = () => micButton.classList.remove("listening");

  recognition.onresult = function(event) {
    const textoUsuario = event.results[0][0].transcript;
    console.log("Usu√°rio disse:", textoUsuario);

    // Enviar para o Chatfuel
    const input = document.querySelector(".cf-textarea");
    const btn = document.querySelector(".cf-send-button");
    if (input && btn) {
      input.value = textoUsuario;
      btn.click();
    }
  };

  recognition.start();
}

// Observar mensagens do bot e falar
const observer = new MutationObserver(mutations => {
  mutations.forEach(mutation => {
    mutation.addedNodes.forEach(node => {
      if (node.nodeType === 1 && node.classList.contains("cf-message") && node.classList.contains("cf-bot")) {
        const texto = node.innerText.trim();
        if (texto) falar(texto);
      }
    });
  });
});

window.addEventListener("load", () => {
  // Ativar observer no chat
  const check = setInterval(() => {
    const chat = document.querySelector(".cf-chat__messages");
    if (chat) {
      observer.observe(chat, { childList: true, subtree: true });
      clearInterval(check);
    }
  }, 1000);

  // Bot√£o microfone
  const micButton = document.getElementById("micButton");
  micButton.addEventListener("click", () => escutar(micButton));
});
</script>

</body>
</html>
