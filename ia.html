<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IA - Recicla Tech</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
<style>
:root {
  --dark-blue: #0a0f1e;
  --light-neutral: #f4f6f8;
  --neon-cyan: #00ffff;
}

/* ===== BODY ===== */
body {
  margin: 0;
  font-family: 'Orbitron', sans-serif;
  background-color: var(--dark-blue);
  color: var(--light-neutral);
  overflow-x: hidden;
}

/* ===== HEADER ===== */
header { 
  position:fixed; top:0; left:0; width:100%; padding:20px; 
  display:flex; align-items:center; z-index:1000; 
}

/* ===== HAMBURGER ===== */
.hamburger-toggle {
  position:relative; z-index:1001; background:none; border:none; cursor:pointer;
  display:flex; flex-direction:column; justify-content:space-around;
  width:40px; height:32px;
}
.hamburger-toggle .bar {
  display:block; width:100%; height:4px; background:var(--light-neutral);
  border-radius:3px; transition: all 0.3s ease-in-out;
}
.hamburger-toggle.open .bar:nth-child(1) { transform: rotate(45deg) translate(6px,7px); }
.hamburger-toggle.open .bar:nth-child(2) { opacity:0; }
.hamburger-toggle.open .bar:nth-child(3) { transform: rotate(-45deg) translate(6px,-7px); }

/* ===== MENU ===== */
.nav-menu {
  position:fixed; top:0; left:0; width:280px; height:100vh;
  background: var(--dark-blue); padding-top:100px; padding-left:30px;
  transform:translateX(-100%); transition: transform 0.4s cubic-bezier(0.23,1,0.32,1);
  z-index:999;
}
.nav-menu.open { transform:translateX(0); }
.nav-menu ul { list-style:none; }
.nav-menu ul li { margin-bottom:25px; }
.nav-menu ul li a {
  color:var(--light-neutral); text-decoration:none; font-size:1.5rem;
  font-weight:bold; transition:color 0.2s ease;
}
.nav-menu ul li a:hover, .nav-menu ul li a.active { color:var(--neon-cyan); }

/* ===== HERO ===== */
section.hero {
  padding: 120px 20px 40px;
  text-align: center;
}
section.hero h1 {
  font-size: 3rem;
  color: var(--neon-cyan);
  margin-bottom: 20px;
}
section.hero p {
  font-size: 1.2rem;
  line-height: 1.6;
  max-width: 800px;
  margin: 0 auto;
}

/* ===== CANVAS ===== */
canvas#particles, canvas#three-canvas {
  position: fixed; top:0; left:0; width:100%; height:100%;
  pointer-events: none; z-index:0;
}

/* ===== MICROFONE ===== */
#micButton {
  position: fixed;
  bottom: 90px;
  left: 20px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: none;
  background: var(--neon-cyan);
  color: var(--dark-blue);
  font-size: 1.5rem;
  cursor: pointer;
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 15px var(--neon-cyan);
}
#micButton.listening {
  background: red;
  color: white;
}
</style>
</head>
<body>
<canvas id="particles"></canvas>
<canvas id="three-canvas"></canvas>

<!-- ===== Header ===== -->
<header>
  <button class="hamburger-toggle" aria-label="Abrir menu">
    <span class="bar"></span>
    <span class="bar"></span>
    <span class="bar"></span>
  </button>
</header>

<!-- ===== Menu ===== -->
<nav class="nav-menu">
  <ul>
    <li><a href="index.html">In√≠cio</a></li>
    <li><a href="projetos.html">Projetos</a></li>
    <li><a href="lixo.html">Lixo Eletr√¥nico</a></li>
    <li><a href="ia.html" class="active">IA</a></li>
    <li><a href="creditos.html">Cr√©ditos</a></li>
  </ul>
</nav>

<!-- ===== Hero ===== -->
<section class="hero fade-in">
  <h1>J.A.R.V.I.S - Intelig√™ncia Artificial da Recicla Tech</h1>
  <p>
    O <strong>J.A.R.V.I.S</strong> √© o assistente inteligente da Recicla Tech, capaz de identificar tipos de lixo eletr√¥nico, 
    sugerir formas de descarte e registrar informa√ß√µes sobre os materiais enviados.
  </p>
  <p>
    <strong>Dica:</strong> Aguarde alguns segundos at√© o √≠cone do chat aparecer no canto inferior direito da tela.  
    Quando ele surgir, clique e comece a conversar com a nossa IA! ü§ñ
  </p>
</section>

<!-- ===== Chatfuel Widget ===== -->
<script>
(function() {
	var script = document.createElement('script');
	script.dataset.bot = "68eaeedf74ff2bdfd552316c";
	script.dataset.zindex = "99999";
	script.src = "https://panel.chatfuel.com/widgets/chat-widget/chat-widget.js";
	script.async = true;
	script.defer = true;
	document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>

<!-- ===== THREE.js e part√≠culas ===== -->
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
<script>
// HAMBURGER
const hamburgerToggle = document.querySelector('.hamburger-toggle');
const navMenu = document.querySelector('.nav-menu');
hamburgerToggle.addEventListener('click', () => {
  hamburgerToggle.classList.toggle('open');
  navMenu.classList.toggle('open');
});

// PARTICULAS
const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d');
let particles = [];
function resize() { canvas.width=window.innerWidth; canvas.height=window.innerHeight; }
window.addEventListener('resize', resize); resize();
function createParticles() {
  for(let i=0;i<100;i++){
    particles.push({ x:Math.random()*canvas.width, y:Math.random()*canvas.height, r:Math.random()*2+1, dx:(Math.random()-0.5)*0.5, dy:(Math.random()-0.5)*0.5 });
  }
}
createParticles();
function animateParticles(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle='rgba(0,255,255,0.7)';
    ctx.fill();
    p.x+=p.dx; p.y+=p.dy;
    if(p.x<0||p.x>canvas.width)p.dx*=-1;
    if(p.y<0||p.y>canvas.height)p.dy*=-1;
  });
  requestAnimationFrame(animateParticles);
}
animateParticles();

// THREE.JS
const threeCanvas=document.getElementById('three-canvas');
const scene3D=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight,0.1,1000);
const renderer=new THREE.WebGLRenderer({canvas:threeCanvas, alpha:true});
renderer.setSize(window.innerWidth,window.innerHeight);

const geometry=new THREE.BoxGeometry();
const material=new THREE.MeshBasicMaterial({color:0x00ffff, wireframe:true});
const cubes=[];
for(let i=0;i<50;i++){
  const cube=new THREE.Mesh(geometry, material);
  cube.position.set((Math.random()-0.5)*50,(Math.random()-0.5)*50,(Math.random()-0.5)*50);
  scene3D.add(cube);
  cubes.push(cube);
}
camera.position.z=30;
function animate3D(){
  requestAnimationFrame(animate3D);
  cubes.forEach(c=>{ c.rotation.x+=0.002; c.rotation.y+=0.003; });
  camera.lookAt(0,0,0);
  renderer.render(scene3D,camera);
}
animate3D();
</script>

<!-- ===== VOZ ===== -->
<script>
function falar(texto) {
  const utter = new SpeechSynthesisUtterance(texto);
  utter.lang = "pt-BR";
  speechSynthesis.speak(utter);
}

function escutar(micButton) {
  if (!('webkitSpeechRecognition' in window)) {
    alert("Seu navegador n√£o suporta reconhecimento de voz.");
    return;
  }
  const recognition = new webkitSpeechRecognition();
  recognition.lang = "pt-BR";
  recognition.continuous = false;
  recognition.interimResults = false;
  recognition.onstart = () => micButton.classList.add("listening");
  recognition.onend = () => micButton.classList.remove("listening");

  recognition.onresult = function(event) {
    const textoUsuario = event.results[0][0].transcript;
    console.log("Usu√°rio disse:", textoUsuario);
    const input = document.querySelector(".cf-textarea");
    const btn = document.querySelector(".cf-send-button");
    if (input && btn) {
      input.value = textoUsuario;
      btn.click();
    }
  };
  recognition.start();
}

const observer = new MutationObserver(mutations => {
  mutations.forEach(mutation => {
    mutation.addedNodes.forEach(node => {
      if (node.nodeType === 1 && node.classList.contains("cf-message") && node.classList.contains("cf-bot")) {
        const texto = node.innerText.trim();
        if (texto) falar(texto);
      }
    });
  });
});

window.addEventListener("load", () => {
  const check = setInterval(() => {
    const chat = document.querySelector(".cf-chat__messages");
    if (chat) {
      observer.observe(chat, { childList: true, subtree: true });
      clearInterval(check);
    }
  }, 1000);
});
</script>

</body>
</html>
